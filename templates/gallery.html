{% extends "base.html" %}

{% block title %}Gallery - YUKTI 2025{% endblock %}

{% block content %}
<div class="h-0.5 bg-[#CD7F32] "></div>
<div class="min-h-screen pt-16 sm:pt-20 bg-gradient-to-r from-dark via-darker to-dark animate-gradient-flow">
    <div class="container mx-auto px-2 sm:px-4">
        <!-- Image Popup -->
        <div id="imagePopup" class="fixed inset-0 bg-black bg-opacity-90 hidden z-50 justify-center items-center">
            <div class="relative max-w-4xl mx-auto p-4">
                <button onclick="closePopup()" class="absolute -top-12 right-0 w-10 h-10 bg-primary text-black rounded-full flex items-center justify-center hover:bg-white transition-all transform hover:scale-110">
                    âœ•
                </button>
                <img id="popupImage" src="" alt="" class="max-w-full max-h-[90vh] object-contain border-2 border-primary rounded">
            </div>
        </div>

        <!-- Gallery Content -->
        <section class="bg-[rgba(30,30,30,0.8)] backdrop-blur-lg rounded-xl sm:rounded-2xl p-4 sm:p-8 shadow-2xl">
            <div class="text-center mb-6 sm:mb-8">
                <h1 class="text-2xl sm:text-3xl md:text-4xl text-primary font-bold font-[Orbitron] tracking-wider">
                    <span class="inline-block transform hover:scale-105 transition-transform duration-300">Gallery</span>
                </h1>
                <p class="text-base sm:text-xl text-gray-300 font-[Rajdhani] max-w-3xl mx-auto">Snapshots of Unforgettable Memories from Yukti Fest 2024!</p>
            </div>

            <!-- Flash Mob Section -->
            <div class="space-y-6 sm:space-y-8 md:space-y-12">
                <div class="bg-black bg-opacity-30 rounded-lg sm:rounded-xl p-4 sm:p-6 border border-primary/10">
                    <div class="text-center mb-4 sm:mb-6">
                        <h2 class="text-xl sm:text-2xl md:text-3xl text-primary font-[Audiowide] tracking-wide">
                            Flash Mob
                        </h2>
                    </div>
                    <div class="mb-4 sm:mb-8 px-2 sm:px-4">
                        <p class="text-sm sm:text-base md:text-lg text-gray-300 leading-relaxed text-justify hyphens-auto">
                            A high-energy, surprise dance performance where a group of students suddenly gathered and performed in a public space, engaging the audience and setting the festive mood for the tech fest.
                        </p>
                        <p class="text-sm sm:text-base md:text-lg text-gray-300 leading-relaxed text-justify hyphens-auto">
                            The flash mob served as an electrifying opening act, bringing together performers from various departments who had practiced in secret for weeks. The unexpected nature of the performance created a buzz of excitement throughout the campus.
                        </p>
                    </div>
                    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 sm:gap-6 justify-items-center">
                        {% for i in range(1, 4) %}
                        <div class="gallery-item group relative overflow-hidden rounded-lg sm:rounded-xl border-2 border-secondary hover:border-primary/50 
                                    transition-all duration-300 hover:-translate-y-2 hover:shadow-lg hover:shadow-primary/20">
                            <img src="{{ url_for('static', filename='gallery/fl' ~ i ~ '.jpg') }}"
                                 alt="Flash Mob Event Image {{ i }}"
                                 class="w-full h-48 sm:h-64 object-cover transition-transform duration-300 group-hover:scale-110"
                                 loading="lazy"
                                 onclick="openModal(this.src)"
                                 onerror="this.src='{{ url_for('static', filename='gallery/place.jpg') }}'; 
                                          console.error('Failed to load:', this.src);">
                            <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-4 
                                        opacity-0 group-hover:opacity-100 transition-opacity">
                                <p class="text-primary text-sm">Flash Mob Performance - Moment {{ i }}</p>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>

                <!-- Welcome Ceremony Section -->
                <div class="mb-12 bg-black bg-opacity-30 rounded-xl p-6 border border-primary/10">
                    <h2 class="text-3xl text-primary text-center mb-6 font-[Syncopate] tracking-wide transform hover:scale-105 transition-transform duration-300">
                        Welcome Ceremony
                    </h2>
                    <div class="mb-8 text-gray-300">
                        <p class="text-lg leading-relaxed mb-4 text-justify hyphens-auto">
                            The grand opening of the tech fest, featuring speeches from dignitaries, a ceremonial lamp lighting, and an introduction to the exciting events lined up for the festival.
                        </p>
                        <p class="text-lg leading-relaxed mb-4 text-justify hyphens-auto">
                            Distinguished guests and university officials came together to mark the beginning of this grand celebration, setting the tone for the upcoming days of innovation, creativity, and excellence.
                        </p>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 justify-items-center">
                        <!-- Gallery Items -->
                        {% for i in range(3) %}
                        <div class="gallery-item group relative overflow-hidden rounded-xl border-2 border-secondary hover:border-primary/50 transition-all duration-300 hover:-translate-y-2 hover:shadow-lg hover:shadow-primary/20">
                            <img src="{{ url_for('static', filename='gallery/wl' ~ loop.index ~ '.jpg') }}"
                                 alt="Welcome Ceremony Image {{ loop.index }}"
                                 class="w-full h-64 object-cover transition-transform duration-300 group-hover:scale-110"
                                 loading="lazy"
                                 onerror="this.src='{{ url_for('static', filename='gallery/place.jpg') }}'; console.error('Failed to load:', this.src);">

                            <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-4 opacity-0 group-hover:opacity-100 transition-opacity">
                                <p class="text-primary text-sm">Welcome Ceremony - Moment {{ loop.index }}</p>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>

                <!-- Combined Events Section -->
                <div class="mb-12 bg-black bg-opacity-30 rounded-xl p-6 border border-primary/10">
                    <h2 class="text-3xl text-primary text-center mb-6 font-[Audiowide] tracking-wide transform hover:scale-105 transition-transform duration-300">
                        Festival Events Showcase
                    </h2>
                    
                    <!-- Events Description -->
                    <div class="mb-8 text-gray-300">
                        <p class="text-lg leading-relaxed mb-4 text-justify hyphens-auto">
                            A spectacular fusion of technical brilliance, cultural excellence, and management acumen came together in our grand festival. From coding competitions to dance performances, and from robotics to business challenges, the events showcased diverse talents across multiple domains.
                        </p>
                    </div>

                    <!-- Technical Events Subsection -->
                    <div class="mb-8">
                        <h3 class="text-2xl text-primary mb-4 font-[Rajdhani] pl-4 border-l-4 border-secondary">Technical Events</h3>
                        <p class="text-gray-300 mb-4 text-lg leading-relaxed text-justify hyphens-auto">
                            Showcasing innovation through hackathons, coding competitions, robotics challenges, and technical workshops that pushed the boundaries of technological creativity.
                        </p>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8 justify-items-center">
                            {% for i in range(3) %}
                            <div class="gallery-item group relative overflow-hidden rounded-xl border-2 border-secondary hover:border-primary/50 transition-all duration-300 hover:-translate-y-2 hover:shadow-lg hover:shadow-primary/20">
                                <img src="{{ url_for('static', filename='gallery/tc' ~ loop.index ~ '.jpg') }}"
                                     alt="Technical Event {{ loop.index }}"
                                     class="w-full h-64 object-cover transition-transform duration-300 group-hover:scale-110"
                                     loading="lazy"
                                     onerror="this.src='{{ url_for('static', filename='gallery/place.jpg') }}'; console.error('Failed to load:', this.src);">
                                <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-4 opacity-0 group-hover:opacity-100 transition-opacity">
                                    <p class="text-primary text-sm">Technical Events - Moment {{ loop.index }}</p>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>

                    <!-- Cultural Events Subsection -->
                    <div class="mb-8">
                        <h3 class="text-2xl text-primary mb-4 font-[Rajdhani] pl-4 border-l-4 border-secondary">Cultural Events</h3>
                        <p class="text-gray-300 mb-4 text-lg leading-relaxed text-justify hyphens-auto">
                            Celebrating artistic expression through dance, music, drama, and fashion shows that brought color and creativity to the festival atmosphere.
                        </p>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8 justify-items-center">
                            {% for i in range(6) %}
                            <div class="gallery-item group relative overflow-hidden rounded-xl border-2 border-secondary hover:border-primary/50 transition-all duration-300 hover:-translate-y-2 hover:shadow-lg hover:shadow-primary/20">
                                <img src="{{ url_for('static', filename='gallery/cl' ~ loop.index ~ '.jpg') }}"
                                     alt="Cultural Event {{ loop.index }}"
                                     class="w-full h-64 object-cover transition-transform duration-300 group-hover:scale-110"
                                     loading="lazy"
                                     onerror="this.src='{{ url_for('static', filename='gallery/place.jpg') }}'; console.error('Failed to load:', this.src);">
                                <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-4 opacity-0 group-hover:opacity-100 transition-opacity">
                                    <p class="text-primary text-sm">Cultural Events - Moment {{ loop.index }}</p>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>

                    <!-- Management Events Subsection -->
                    <div class="mb-8">
                        <h3 class="text-2xl text-primary mb-4 font-[Rajdhani] pl-4 border-l-4 border-secondary">Management Events</h3>
                        <p class="text-gray-300 mb-4 text-lg leading-relaxed text-justify hyphens-auto">
                            Testing strategic thinking and leadership through business simulations, case studies, and entrepreneurship competitions.
                        </p>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 justify-items-center">
                            {% for i in range(2) %}
                            <div class="gallery-item group relative overflow-hidden rounded-xl border-2 border-secondary hover:border-primary/50 transition-all duration-300 hover:-translate-y-2 hover:shadow-lg hover:shadow-primary/20">
                                <img src="{{ url_for('static', filename='gallery/mn' ~ loop.index ~ '.jpg') }}"
                                     alt="Management Event {{ loop.index }}"
                                     class="w-full h-64 object-cover transition-transform duration-300 group-hover:scale-110"
                                     loading="lazy"
                                     onerror="this.src='{{ url_for('static', filename='gallery/place.jpg') }}'; console.error('Failed to load:', this.src);">
                                <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-4 opacity-0 group-hover:opacity-100 transition-opacity">
                                    <p class="text-primary text-sm">Management Events - Moment {{ loop.index }}</p>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>

                <!-- Celebrity Night - Day 1 Section -->
                <div class="mb-12 bg-black bg-opacity-30 rounded-xl p-6 border border-primary/10">
                    <h2 class="text-3xl text-primary text-center mb-6 font-[Syncopate] tracking-wide transform hover:scale-105 transition-transform duration-300">
                        Celebrity Night - Day 1
                    </h2>
                    <div class="mb-8 text-gray-300">
                        <p class="text-lg leading-relaxed mb-4 text-justify hyphens-auto">
                            A thrilling evening with a popular celebrity guest, featuring live music, dance performances, and entertainment that kept the crowd energized and excited.
                        </p>
                        <p class="text-lg leading-relaxed mb-4 text-justify hyphens-auto">
                            The electric atmosphere filled with pulsating beats, dazzling lights, and enthusiastic cheers created an unforgettable night of celebration and entertainment.
                        </p>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 justify-items-center">
                        <!-- Gallery Items -->
                        {% for i in range(9) %}
                        <div class="gallery-item group relative overflow-hidden rounded-xl border-2 border-secondary hover:border-primary/50 transition-all duration-300 hover:-translate-y-2 hover:shadow-lg hover:shadow-primary/20">
                            <img src="{{ url_for('static', filename='gallery/nt' ~ loop.index ~ '.jpg') }}"
                                 alt="Celebrity Night - Day 1 Image {{ loop.index }}"
                                 class="w-full h-64 object-cover transition-transform duration-300 group-hover:scale-110"
                                 loading="lazy"
                                 onerror="this.src='{{ url_for('static', filename='gallery/place.jpg') }}'; console.error('Failed to load:', this.src);">
                            <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-4 opacity-0 group-hover:opacity-100 transition-opacity">
                                <p class="text-primary text-sm">Celebrity Night - Day 1 - Moment {{ loop.index }}</p>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>

                <!-- Awards Ceremony Section -->
                <div class="mb-12 bg-black bg-opacity-30 rounded-xl p-6 border border-primary/10">
                    <h2 class="text-3xl text-primary text-center mb-6 font-[Syncopate] tracking-wide transform hover:scale-105 transition-transform duration-300">
                        Awards Ceremony
                    </h2>
                    <div class="mb-8 text-gray-300">
                        <p class="text-lg leading-relaxed mb-4 text-justify hyphens-auto">
                            A prestigious event honoring the winners of various competitions, recognizing their talent, hard work, and innovation with trophies, certificates, and accolades.
                        </p>
                        <p class="text-lg leading-relaxed mb-4 text-justify hyphens-auto">
                            The ceremony celebrated excellence across technical, cultural, and management domains, inspiring future participants and creating moments of pride for winners and their institutions alike.
                        </p>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 justify-items-center">
                        <!-- Gallery Items -->
                        {% for i in range(6) %}
                        <div class="gallery-item group relative overflow-hidden rounded-xl border-2 border-secondary hover:border-primary/50 transition-all duration-300 hover:-translate-y-2 hover:shadow-lg hover:shadow-primary/20">
                            <img src="{{ url_for('static', filename='gallery/aw' ~ loop.index ~ '.jpg') }}"
                                 alt="Awards Ceremony Image {{ loop.index }}"
                                 class="w-full h-64 object-cover transition-transform duration-300 group-hover:scale-110"
                                 loading="lazy"
                                 onerror="this.src='{{ url_for('static', filename='gallery/place.jpg') }}'; console.error('Failed to load:', this.src);">
                            <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-4 opacity-0 group-hover:opacity-100 transition-opacity">
                                <p class="text-primary text-sm">Awards Ceremony - Moment {{ loop.index }}</p>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>

                <!-- Celebrity Night - Day 2 Section -->
                <div class="mb-12 bg-black bg-opacity-30 rounded-xl p-6 border border-primary/10">
                    <h2 class="text-3xl text-primary text-center mb-6 font-[Syncopate] tracking-wide transform hover:scale-105 transition-transform duration-300">
                        Celebrity Night - Day 2
                    </h2>
                    <div class="mb-8 text-gray-300">
                        <p class="text-lg leading-relaxed mb-4 text-justify hyphens-auto">
                            Another star-studded night with a different celebrity or artist, bringing an electrifying close to the fest with mesmerizing performances, music, and celebrations.
                        </p>
                        <p class="text-lg leading-relaxed mb-4 text-justify hyphens-auto">
                            The grand finale featured spectacular live performances, creating an atmosphere of pure joy and excitement as the festival drew to a memorable close.
                        </p>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 justify-items-center">
                        <!-- Gallery Items -->
                        {% for i in range(4) %}
                        <div class="gallery-item group relative overflow-hidden rounded-xl border-2 border-secondary hover:border-primary/50 transition-all duration-300 hover:-translate-y-2 hover:shadow-lg hover:shadow-primary/20">
                            <img src="{{ url_for('static', filename='gallery/n' ~ loop.index ~ '.jpg') }}?v=1"
                                 alt="Celebrity Night - Day 2 Image {{ loop.index }}"
                                 class="w-full h-64 object-cover transition-transform duration-300 group-hover:scale-110"
                                 loading="lazy"
                                 onerror="this.src='{{ url_for('static', filename='gallery/place.jpg') }}'; console.error('Failed to load:', this.src);">
                            <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-4 opacity-0 group-hover:opacity-100 transition-opacity">
                                <p class="text-primary text-sm">Celebrity Night - Day 2 - Moment {{ loop.index }}</p>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </section>
    </div>
</div>

<!-- Add modal for image popup -->
<div id="imageModal" class="fixed inset-0 z-50 hidden bg-black bg-opacity-90 flex items-center justify-center p-2 sm:p-4">
    <button onclick="closeModal()" class="absolute top-2 right-2 sm:top-4 sm:right-4 w-8 h-8 sm:w-10 sm:h-10 bg-white/10 rounded-full flex items-center justify-center text-white hover:text-[#FF00FF] text-xl sm:text-2xl">
        <i class="fas fa-times"></i>
    </button>
    <img id="modalImage" src="" alt="Enlarged Image" 
         class="max-w-[95%] sm:max-w-[90%] max-h-[90vh] object-contain rounded-lg">
</div>

<style>
    @media (max-width: 640px) {
        .gallery-item img {
            height: 200px;
        }
        
        .text-justify {
            text-align: justify;
            hyphens: auto;
        }
        
        #imageModal button {
            transform: scale(0.9);
        }
    }

    @media (min-width: 641px) {
        .text-justify {
            text-align: justify;
            hyphens: manual;
        }
        
        .gallery-section {
            padding: 1.5rem;
        }
        
        .gallery-description {
            padding: 0 1rem;
        }
        
        .gallery-grid {
            gap: 1.5rem;
        }
    }
</style>

<script>
    // Remove handleImageError function as we're using simpler error handling

    // Add debug logging for image loading
    document.querySelectorAll('.gallery-item img').forEach(img => {
        img.addEventListener('load', function() {
            console.log('Successfully loaded:', this.src);
        });
        img.addEventListener('error', function() {
            console.error('Failed to load:', this.src);
        });
    });

    const popup = document.getElementById('imagePopup');
    const popupImage = document.getElementById('popupImage');

    document.querySelectorAll('.gallery-item img').forEach(image => {
        image.addEventListener('click', function() {
            popupImage.src = this.src;
            popupImage.alt = this.alt;
            popup.classList.remove('hidden');
            popup.classList.add('flex');
            document.body.style.overflow = 'hidden';
        });
    });

    function closePopup() {
        popup.classList.add('hidden');
        popup.classList.remove('flex');
        document.body.style.overflow = '';
    }

    popup.addEventListener('click', function(e) {
        if (e.target === popup) {
            closePopup();
        }
    });

    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
            closePopup();
        }
    });

    const modal = document.getElementById('imageModal');
    const modalImg = document.getElementById('modalImage');

    function openModal(imgSrc) {
        modal.classList.remove('hidden');
        modalImg.src = imgSrc;
        document.body.style.overflow = 'hidden';
    }

    function closeModal() {
        modal.classList.add('hidden');
        modalImg.src = '';
        document.body.style.overflow = 'auto';
    }

    // Close modal when clicking outside the image
    modal.addEventListener('click', function(e) {
        if (e.target === modal) {
            closeModal();
        }
    });

    // Close modal with Escape key
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
            closeModal();
        }
    });
</script>
{% endblock %}
```
